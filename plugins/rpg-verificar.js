import { createHash } from 'crypto'
let Reg = /\|?(.*)([.|] *?)([0-9]*)$/i
let handler = async function (m, { conn, text, usedPrefix, command }) {
  let user = db.data.users[m.sender]
  let name2 = conn.getName(m.sender)
  if (user.registered === true) throw `ğŸŒ´ğ™·ğ™¾ğ™»ğ™° ğšˆğ™° ğšƒğ™´ ğ™´ğ™½ğ™²ğš„ğ™´ğ™½ğšƒğšğ™°ğš‚ğŸƒ ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™°ğ™³ğ™¾ ğ™´ğ™½ ğ™¼ğ™¸ ğ™±ğ™°ğš‚ğ™´ ğ™³ğ™´ ğ™³ğ™°ğšƒğ™¾ğš‚ ğš‚ğ™¸ ğ™³ğ™´ğš‚ğ™´ğ™°ğš‚ ğ™´ğ™»ğ™¸ğ™¼ğ™¸ğ™½ğ™°ğšâ˜˜ï¸ ğšƒğš„ ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™¾ ğ™¿ğ™°ğšğ™° ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™°ğšğšƒğ™´ ğ™¾ğšƒğšğ™° ğš…ğ™´ğš‰ ğš„ğš‚ğ™°ğ™» ğ™²ğ™¾ğ™¼ğ™°ğ™½ğ™³ğ™¾ğŸŒ±\n/unreg <NÃºmero de serie>`
  if (!Reg.test(text)) throw `ğŸŒ¹ğ™·ğ™¾ğ™»ğ™° ğšƒğ™´ ğ™¸ğ™½ğ™µğ™¾ğšğ™¼ğ™¾ ğš€ğš„ğ™´ ğ™·ğ™°ğš‚ âŒğ™µğ™°ğ™»ğ™»ğ™°ğ™³ğ™¾ ğ™²ğ™¾ğ™½ ğ™´ğ™» ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™¾ ğšˆğ™° ğšƒğ™´ ğ™»ğ™¾ ğ™·ğ™°ğš‚ ğ™·ğ™´ğ™²ğ™·ğ™¾ ğ™´ğ™½ ğ™²ğ™¾ğšğšğ™´ğ™²ğšƒğ™°ğ™¼ğ™´ğ™½ğšƒğ™´âœ¨ğšƒğ™´ ğ™³ğ™¾ğšˆ ğš„ğ™½ â˜˜ï¸ğ™´ğ™¹ğ™´ğ™¼ğ™¿ğ™»ğ™¾\n/Reg Yovani .21`
  let [_, name, splitter, age] = text.match(Reg)
  if (!name) throw 'ğŸƒğ™·ğ™¾ğ™»ğ™° ğšƒğ™´ ğ™¸ğ™½ğ™µğ™¾ğšğ™¼ğ™¾ ğš€ğš„ğ™´ ğ™´ğ™» ğ™½ğ™¾ğ™¼ğ™±ğšğ™´ ğ™½ğ™¾ ğ™¿ğš„ğ™³ğ™´ ğ™´ğš‚ğšƒğ™°ğš ğš…ğ™°ğ™²Ãğ™¾ ğ™´ğ™½ ğ™´ğ™» ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™¾ ğšƒğ™¸ğ™´ğ™½ğ™´ğš‚ ğš€ğš„ğ™´ ğ™¿ğ™¾ğ™½ğ™´ğš ğšƒğš„ ğ™½ğ™¾ğ™¼ğ™±ğšğ™´ğŸƒ'
  if (!age) throw 'â˜˜ï¸ğ™·ğ™¾ğ™»ğ™° ğšƒğ™´ ğ™¸ğ™½ğ™µğ™¾ğšğ™¼ğ™¾ ğ™½ğ™¾ ğ™¿ğš„ğ™´ğ™³ğ™´ ğ™´ğš‚ğšƒğ™°ğš ğš…ğ™°ğ™²ğ™¸ğ™¾ ğšƒğš„ ğ™´ğ™³ğ™°ğ™³ ğ™´ğ™½ ğ™´ğ™» ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™¾ ğšƒğ™¸ğ™´ğ™½ğ™´ğš‚ ğš€ğš„ğ™´ ğ™¿ğ™¾ğ™½ğ™´ğšğšƒğ™´ ğšƒğš„ ğ™´ğ™³ğ™°ğ™³ğŸŒ±'
  if (name.length >= 30) throw 'â˜˜ï¸ğ™·ğ™¾ğ™»ğ™° ğŸ˜Šğ™¾ğšˆğ™´ ğ™¿ğš„ğ™´ğ™³ğ™´ğš‚ ğ™¿ğ™¾ğ™½ğ™´ğš ğš„ğ™½ ğ™½ğ™¾ğ™¼ğ™±ğšğ™´ ğ™¼Ãğš‚ ğ™²ğ™¾ğšğšƒğ™¾ğŸŒ´ğšˆğ™° ğš€ğš„ğ™´ ğ™´ğ™» ğš€ğš„ğ™´ ğ™´ğš‚ğšƒÃğš‚ ğ™³ğ™´ğ™¼ğ™°ğš‚ğ™¸ğ™°ğ™³ğ™¾ ğ™»ğ™°ğšğ™¶ğ™¾ ğ™¿ğ™¾ğš ğ™µğ™°ğš…ğ™¾ğš ğ™´ğš‚ğ™²ğšğ™¸ğ™±ğ™´ ğ™»ğ™¾ ğ™¼Ãğš‚ ğ™²ğ™¾ğšğšƒğ™¾ğŸŒ¹ï¸' 
  age = parseInt(age)
  if (age > 100) throw 'âœ¨ğ™·ğ™¾ğ™»ğ™° ğŸ˜…ğ™¾ğšˆğ™´ ğ™¿ğ™¾ğš ğ™µğ™°ğš…ğ™¾ğš â˜˜ï¸ğ™¿ğš„ğ™´ğ™³ğ™´ğš‚ ğ™¿ğ™¾ğ™½ğ™´ğš ğšƒğš„ ğ™´ğ™³ğ™°ğ™³ ğ™¼Ãğš‚ ğ™±ğ™°ğ™¹ğ™° ğ™¾ ğ™°ğ™²ğ™°ğš‚ğ™¾ ğ™´ğšğ™´ğš‚ ğš„ğ™½ ğ™°ğ™½ğ™²ğ™¸ğ™°ğ™½ğ™¾ğŸ¤­?'
  if (age < 5) throw 'ğŸ˜’ğ™¿ğ™¾ğš ğ™µğ™°ğš…ğ™¾ğš ğš…ğ™°ğ™¼ğ™¾ğš‚ ğ™½ğ™¾ ğ™´ğš‚ğšƒğ™´ğ™½ ğ™¹ğš„ğ™¶ğ™°ğ™½ğ™³ğ™¾ğŸ¤¨ ğ™²ğ™¾ğ™¼ğ™¾ ğš„ğ™½ğ™¾ ğ™½ğ™¸ğ™½ğ™¾ ğ™³ğ™´ ğ™²ğ™¸ğ™½ğ™²ğ™¾ ğ™°ğ™½ğ™¾ğš‚ ğš…ğ™° ğ™° ğ™¿ğ™¾ğ™³ğ™´ğš ğ™´ğš‚ğ™²ğšğ™¸ğ™±ğ™¸ğšğŸ˜…'
  user.name = name.trim()
  user.age = age
  user.regTime = + new Date
  user.registered = true
  let sn = createHash('md5').update(m.sender).digest('hex')
  m.reply(`â•­ã€Œâ»â¥ğ™·ğ™°ğ™³ğ™´ğš‚-ğ™±ğ™¾ğšƒ-ğ™¾ğ™¼ğ™´ğ™¶ğ™°â»â¥ã€
â”‚â¯â›¥â[ğŸŒ´]ğ™·ğ™¾ğ™»ğ™° ğšˆğ™° ğ™´ğš‚ğšƒÃğš‚ ğšğ™´ğ™¶ğ™¸ğš‚ğšƒğšğ™°ğ™³ğ™¾ 
â”‚â¯â›¥â[ğŸ¤´]ğ™½ğ™¾ğ™¼ğ™±ğšğ™´ ${name}
â”‚â¯â›¥â[ğŸ§]ğ™´ğ™³ğ™°ğ™³ ${age} ğ™°Ã‘ğ™¾ğš‚ 
â”‚â¯â›¥â[â„¢ï¸]ğ™½Ãšğ™¼ğ™´ğšğ™¾ ğ™³ğ™´ ğš‚ğ™´ğšğ™¸ğ™´
â”‚â¯â›¥â[âœ”ï¸]${sn}
ï¸â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
ğŸá­¢â”â”â”â”â”â”â”â”â”á­¥ğŸá­¢`.trim())
}
handler.help = ['daftar', 'register'].map(v => v + ' <nama>.<umur>')
handler.tags = ['xp']

handler.command = /^(Reg|reg|registrar|reg(ister)?)$/i

export default handler
