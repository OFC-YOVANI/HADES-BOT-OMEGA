import {createHash} from 'crypto';
const Reg = /\|?(.*)([.|] *?)([0-9]*)$/i;
const handler = async function(m, {conn, text, usedPrefix, command}) {
  const user = global.db.data.users[m.sender];
  const name2 = conn.getName(m.sender);
  const pp = await conn.profilePictureUrl(m.chat, 'image').catch((_) => global.imagen1);
  if (user.registered === true) throw `*­Ъї┤­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­Юџѕ­ЮЎ░ ­ЮџЃ­ЮЎ┤ ­ЮЎ┤­ЮЎй­ЮЎ▓­Юџё­ЮЎ┤­ЮЎй­ЮџЃ­ЮџЂ­ЮЎ░­Юџѓ­ЪЇЃ ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎ░­ЮЎ│­ЮЎЙ ­ЮЎ┤­ЮЎй ­ЮЎ╝­ЮЎИ ­ЮЎ▒­ЮЎ░­Юџѓ­ЮЎ┤ ­ЮЎ│­ЮЎ┤ ­ЮЎ│­ЮЎ░­ЮџЃ­ЮЎЙ­Юџѓ ­Юџѓ­ЮЎИ ­ЮЎ│­ЮЎ┤­Юџѓ­ЮЎ┤­ЮЎ░­Юџѓ ­ЮЎ┤­ЮЎ╗­ЮЎИ­ЮЎ╝­ЮЎИ­ЮЎй­ЮЎ░­ЮџЂРўў№ИЈ ­ЮџЃ­Юџё ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎЙ ­ЮЎ┐­ЮЎ░­ЮџЂ­ЮЎ░ ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎ░­ЮџЂ­ЮџЃ­ЮЎ┤ ­ЮЎЙ­ЮџЃ­ЮџЂ­ЮЎ░ ­ЮџЁ­ЮЎ┤­ЮџЅ ­Юџё­Юџѓ­ЮЎ░­ЮЎ╗ ­ЮЎ▓­ЮЎЙ­ЮЎ╝­ЮЎ░­ЮЎй­ЮЎ│­ЮЎЙ­Ъї▒*\n*/unreg <N├║mero de serie>*`;
  if (!Reg.test(text)) throw `*­Ъї╣­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­ЮџЃ­ЮЎ┤ ­ЮЎИ­ЮЎй­ЮЎх­ЮЎЙ­ЮџЂ­ЮЎ╝­ЮЎЙ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎи­ЮЎ░­Юџѓ РЮї­ЮЎх­ЮЎ░­ЮЎ╗­ЮЎ╗­ЮЎ░­ЮЎ│­ЮЎЙ ­ЮЎ▓­ЮЎЙ­ЮЎй ­ЮЎ┤­ЮЎ╗ ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎЙ ­Юџѕ­ЮЎ░ ­ЮџЃ­ЮЎ┤ ­ЮЎ╗­ЮЎЙ ­ЮЎи­ЮЎ░­Юџѓ ­ЮЎи­ЮЎ┤­ЮЎ▓­ЮЎи­ЮЎЙ ­ЮЎ┤­ЮЎй ­ЮЎ▓­ЮЎЙ­ЮџЂ­ЮџЂ­ЮЎ┤­ЮЎ▓­ЮџЃ­ЮЎ░­ЮЎ╝­ЮЎ┤­ЮЎй­ЮџЃ­ЮЎ┤Рюе­ЮџЃ­ЮЎ┤ ­ЮЎ│­ЮЎЙ­Юџѕ ­Юџё­ЮЎй Рўў№ИЈ­ЮЎ┤­ЮЎ╣­ЮЎ┤­ЮЎ╝­ЮЎ┐­ЮЎ╗­ЮЎЙ*\n*/Reg Yovani .21*`;
  let [_, name, splitter, age] = text.match(Reg);
  if (!name) throw '­ЪЇЃ­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­ЮџЃ­ЮЎ┤ ­ЮЎИ­ЮЎй­ЮЎх­ЮЎЙ­ЮџЂ­ЮЎ╝­ЮЎЙ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎ┤­ЮЎ╗ ­ЮЎй­ЮЎЙ­ЮЎ╝­ЮЎ▒­ЮџЂ­ЮЎ┤ ­ЮЎй­ЮЎЙ ­ЮЎ┐­Юџё­ЮЎ│­ЮЎ┤ ­ЮЎ┤­Юџѓ­ЮџЃ­ЮЎ░­ЮџЂ ­ЮџЁ­ЮЎ░­ЮЎ▓├Ї­ЮЎЙ ­ЮЎ┤­ЮЎй ­ЮЎ┤­ЮЎ╗ ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎЙ ­ЮџЃ­ЮЎИ­ЮЎ┤­ЮЎй­ЮЎ┤­Юџѓ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎ┐­ЮЎЙ­ЮЎй­ЮЎ┤­ЮџЂ ­ЮџЃ­Юџё ­ЮЎй­ЮЎЙ­ЮЎ╝­ЮЎ▒­ЮџЂ­ЮЎ┤­ЪЇЃ';
  if (!age) throw '*Рўў№ИЈ­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­ЮџЃ­ЮЎ┤ ­ЮЎИ­ЮЎй­ЮЎх­ЮЎЙ­ЮџЂ­ЮЎ╝­ЮЎЙ ­ЮЎй­ЮЎЙ ­ЮЎ┐­Юџё­ЮЎ┤­ЮЎ│­ЮЎ┤ ­ЮЎ┤­Юџѓ­ЮџЃ­ЮЎ░­ЮџЂ ­ЮџЁ­ЮЎ░­ЮЎ▓­ЮЎИ­ЮЎЙ ­ЮџЃ­Юџё ­ЮЎ┤­ЮЎ│­ЮЎ░­ЮЎ│ ­ЮЎ┤­ЮЎй ­ЮЎ┤­ЮЎ╗ ­ЮџЂ­ЮЎ┤­ЮЎХ­ЮЎИ­Юџѓ­ЮџЃ­ЮџЂ­ЮЎЙ ­ЮџЃ­ЮЎИ­ЮЎ┤­ЮЎй­ЮЎ┤­Юџѓ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎ┐­ЮЎЙ­ЮЎй­ЮЎ┤­ЮџЂ­ЮџЃ­ЮЎ┤ ­ЮџЃ­Юџё ­ЮЎ┤­ЮЎ│­ЮЎ░­ЮЎ│­Ъї▒*';
  if (name.length >= 30) throw '*Рўў№ИЈ­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­Ъўі­ЮЎЙ­Юџѕ­ЮЎ┤ ­ЮЎ┐­Юџё­ЮЎ┤­ЮЎ│­ЮЎ┤­Юџѓ ­ЮЎ┐­ЮЎЙ­ЮЎй­ЮЎ┤­ЮџЂ ­Юџё­ЮЎй ­ЮЎй­ЮЎЙ­ЮЎ╝­ЮЎ▒­ЮџЂ­ЮЎ┤ ­ЮЎ╝├Ђ­Юџѓ ­ЮЎ▓­ЮЎЙ­ЮџЂ­ЮџЃ­ЮЎЙ­Ъї┤­Юџѕ­ЮЎ░ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎ┤­ЮЎ╗ ­Юџђ­Юџё­ЮЎ┤ ­ЮЎ┤­Юџѓ­ЮџЃ├Ђ­Юџѓ ­ЮЎ│­ЮЎ┤­ЮЎ╝­ЮЎ░­Юџѓ­ЮЎИ­ЮЎ░­ЮЎ│­ЮЎЙ ­ЮЎ╗­ЮЎ░­ЮџЂ­ЮЎХ­ЮЎЙ ­ЮЎ┐­ЮЎЙ­ЮџЂ ­ЮЎх­ЮЎ░­ЮџЁ­ЮЎЙ­ЮџЂ ­ЮЎ┤­Юџѓ­ЮЎ▓­ЮџЂ­ЮЎИ­ЮЎ▒­ЮЎ┤ ­ЮЎ╗­ЮЎЙ ­ЮЎ╝├Ђ­Юџѓ ­ЮЎ▓­ЮЎЙ­ЮџЂ­ЮџЃ­ЮЎЙ­Ъї╣№ИЈ*';
  age = parseInt(age);
  if (age > 100) throw '*Рюе­ЮЎи­ЮЎЙ­ЮЎ╗­ЮЎ░ ­ЪўЁ­ЮЎЙ­Юџѕ­ЮЎ┤ ­ЮЎ┐­ЮЎЙ­ЮџЂ ­ЮЎх­ЮЎ░­ЮџЁ­ЮЎЙ­ЮџЂ Рўў№ИЈ­ЮЎ┐­Юџё­ЮЎ┤­ЮЎ│­ЮЎ┤­Юџѓ ­ЮЎ┐­ЮЎЙ­ЮЎй­ЮЎ┤­ЮџЂ ­ЮџЃ­Юџё ­ЮЎ┤­ЮЎ│­ЮЎ░­ЮЎ│ ­ЮЎ╝├Ђ­Юџѓ ­ЮЎ▒­ЮЎ░­ЮЎ╣­ЮЎ░ ­ЮЎЙ ­ЮЎ░­ЮЎ▓­ЮЎ░­Юџѓ­ЮЎЙ ­ЮЎ┤­ЮџЂ­ЮЎ┤­Юџѓ ­Юџё­ЮЎй ­ЮЎ░­ЮЎй­ЮЎ▓­ЮЎИ­ЮЎ░­ЮЎй­ЮЎЙ­ЪцГ?*';
  if (age < 5) throw '*­Ъўњ­ЮЎ┐­ЮЎЙ­ЮџЂ ­ЮЎх­ЮЎ░­ЮџЁ­ЮЎЙ­ЮџЂ ­ЮџЁ­ЮЎ░­ЮЎ╝­ЮЎЙ­Юџѓ ­ЮЎй­ЮЎЙ ­ЮЎ┤­Юџѓ­ЮџЃ­ЮЎ┤­ЮЎй ­ЮЎ╣­Юџё­ЮЎХ­ЮЎ░­ЮЎй­ЮЎ│­ЮЎЙ­Ъце ­ЮЎ▓­ЮЎЙ­ЮЎ╝­ЮЎЙ ­Юџё­ЮЎй­ЮЎЙ ­ЮЎй­ЮЎИ├Љ­ЮЎЙ ­ЮЎ│­ЮЎ┤ ­ЮЎ▓­ЮЎИ­ЮЎй­ЮЎ▓­ЮЎЙ ­ЮЎ░­ЮЎй­ЮЎЙ­Юџѓ ­ЮџЁ­ЮЎ░ ­ЮЎ░ ­ЮЎ┐­ЮЎЙ­ЮЎ│­ЮЎ┤­ЮџЂ ­ЮЎ┤­Юџѓ­ЮЎ▓­ЮџЂ­ЮЎИ­ЮЎ▒­ЮЎИ­ЮџЂ­ЪўЁ*';
  user.name = name.trim();
  user.age = age;
  user.regTime = + new Date;
  user.registered = true;
  const sn = createHash('md5').update(m.sender).digest('hex');
  const caption = `­ЪЊЃр┤┐рхЅрхЇРЂ▒╦брхЌ╩│рхњ рХюрхњрхљрхќ╦АрхЅрхЌрхЃрхѕрхњ РЂ▒РЂ┐рХархњ╩│рхљрхЃрХюРЂ▒├│РЂ┐ рхѕрхЅ╦А ╩│рхЅрхЇРЂ▒╦брхЌ╩│рхњ
­Ъффр┤║рхњрхљрхЄ╩│рхЅ ${name}
РўЃ№ИЈрхЅрхѕрхЃрхѕ ${age}
­ЪЊЃр┤║├║рхљрхЅ╩│рхњ рхѕрхЅ ╦брхЅ╩│РЂ▒рхЅ
 ${sn}

­ЪїЪр┤г╩░рхњ╩│рхЃ рхЌрхЅ рхЅРЂ┐рХюрхўрхЅРЂ┐рхЌ╩│рхЃ╦б ╩│рхЅрхЇРЂ▒╦брхЌ╩│рхЃрхѕ@ рхЅРЂ┐ рхљРЂ▒ рхЄрхЃ╦брхЅ рхѕрхЅ рхѕрхЃрхЌрхњ╦б рхѕРЂ▒╦брХа╩│рхўрхЌрхЃ рхѕрхЅ╦А рхЄрхњрхЌ ­Ъцќ

­ЪЊЃ╦бРЂ▒ рхѕрхЅ╦брхЅрхЃ╦б рХюрхЃрхљрхЄРЂ▒рхЃ╩│ рхЌрхў ╩│рхЅрхЇРЂ▒╦брхЌ╩│рхњ рхЅ╦АРЂ▒рхљРЂ▒РЂ┐рхЃ рхЌрхў РЂ┐├║рхљрхЅ╩│рхњ рхѕрхЅ ╦брхЅ╩│РЂ▒рхЅ рхЅ╩▓рхЅрхљрхќ╦Архњ

­Ъфф/рхўРЂ┐╩│рхЅрхЇ ${sn}

р┤░рхЅ╦брхќрхўрхЅ╦б рхЌрхЅ рхЏрхўрхЅ╦АрхЏрхЅ╦б рхЃ ╩│рхЅрхЇРЂ▒╦брхЌ╩│рхЃ╩│`;
  await conn.sendFile(m.chat, pp, 'hades.jpg', caption);
  
  global.db.data.users[m.sender].money += 10000;
  global.db.data.users[m.sender].exp += 10000;
};
handler.help = ['verificar'];
handler.tags = ['xp'];
handler.command = /^(Reg|reg)$/i;
export default handler;
